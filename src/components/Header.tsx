
import { useState } from 'react';
import { Link } from 'react-router-dom';
import { Button } from "@/components/ui/button";
import { Search, User, Globe, Menu } from 'lucide-react';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu";
import { Input } from "@/components/ui/input";

const Header = () => {
  const [showSearch, setShowSearch] = useState(false);

  return (
    <header className="sticky top-0 z-50 bg-white border-b border-gray-200">
      <div className="container mx-auto px-4 py-4 flex items-center justify-between">
        {/* Logo */}
        <Link to="/" className="flex items-center">
          <svg
            className="block h-8 w-auto text-airbnb-red"
            viewBox="0 0 30 32"
            fill="currentColor"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M29.3864 22.7101C29.2429 22.3073 29.0752 21.9176 28.9157 21.5565C28.6701 21.0011 28.4129 20.4446 28.1641 19.9067L28.1444 19.864C25.9255 15.0589 23.5439 10.1881 21.0659 5.38701L20.9607 5.18316C20.7079 4.69946 20.4466 4.18178 20.1784 3.68953C19.8604 3.0655 19.4745 2.49476 19.0276 1.97893C18.5245 1.38941 17.8956 0.916708 17.1853 0.594298C16.475 0.271889 15.7005 0.105657 14.9165 0.105657C14.1325 0.105657 13.358 0.271889 12.6477 0.594298C11.9374 0.916708 11.3085 1.38941 10.8054 1.97893C10.3585 2.49476 9.97257 3.0655 9.65449 3.68953C9.38633 4.18178 9.12498 4.69946 8.87212 5.18316L8.76688 5.38701C6.28891 10.1881 3.90729 15.0589 1.68837 19.8554L1.65802 19.9221C1.41252 20.4525 1.15289 21.0011 0.918132 21.5477C0.75849 21.9162 0.590845 22.3061 0.447188 22.7101C0.10897 23.8104 -0.0221291 24.9803 0.00299863 26.1545C0.0465136 27.3242 0.336434 28.4722 0.849849 29.515C1.36337 30.5578 2.09279 31.4691 2.99277 32.1805C3.99768 32.9776 5.15726 33.5317 6.37864 33.8049C7.59089 34.078 8.83681 34.0711 10.0542 33.7847C11.464 33.4515 12.8099 32.8952 14.031 32.1324C15.257 32.8941 16.6099 33.4466 18.028 33.7724C19.227 34.0583 20.4906 34.0651 21.6937 33.7975C22.89 33.5317 24.0638 32.98 25.0727 32.1884C25.9726 31.4709 26.7021 30.5626 27.2156 29.5217C27.7298 28.4805 28.0203 27.3328 28.064 26.1613C28.0861 24.9899 27.9535 23.8178 27.6133 22.7101H29.3864ZM14.9165 31.6923C13.1429 30.6105 11.9257 29.0069 11.4414 27.1585C11.3379 26.7 11.2856 26.2295 11.2856 25.7573C11.2856 25.2851 11.3379 24.8146 11.4414 24.3561C11.5693 23.8172 11.7627 23.2934 12.0169 22.7995C12.4646 22.017 13.0789 21.3411 13.8212 20.8193C14.5636 20.2976 15.4192 19.9404 16.3139 19.7712C17.2086 19.602 18.1246 19.6249 19.0073 19.8386C19.89 20.0523 20.7181 20.4517 21.4333 21.0044C21.5932 21.1243 21.7471 21.254 21.895 21.3921C21.673 21.7728 21.4438 22.1567 21.2087 22.5417L21.0714 22.7898C18.7436 26.7698 16.2838 30.7088 13.7019 34.6059L13.6881 34.6253C14.0938 33.698 14.5326 32.7791 14.9165 31.6923ZM26.1134 26.0171C26.0779 26.88 25.8233 27.7191 25.3754 28.4647C24.9276 29.2102 24.2996 29.8393 23.5477 30.2932C22.7632 30.7723 21.8574 31.0309 20.9328 31.034C19.9484 31.0444 18.9748 30.7865 18.1041 30.2836C17.093 29.6918 16.2183 28.8936 15.5034 27.9352C16.3228 26.5893 17.0818 25.2344 17.8378 23.8902L17.9668 23.6464C18.1893 23.2609 18.4118 22.8693 18.6402 22.474C18.6989 22.3762 18.7576 22.2784 18.8162 22.1806C19.0465 21.792 19.2928 21.3972 19.5391 21.0181C19.8254 20.5611 20.1893 20.1555 20.6089 19.8173C21.0846 19.4348 21.637 19.15 22.2289 18.9843C22.8208 18.8187 23.4393 18.7761 24.0491 18.8596C24.6589 18.9431 25.2462 19.1509 25.7732 19.4697C26.3002 19.7885 26.7551 20.2114 27.1092 20.7125C27.4634 21.2136 27.7093 21.783 27.8323 22.384C27.9553 22.985 27.9529 23.6052 27.8253 24.2051C27.619 24.8162 27.349 25.4047 27.0206 25.9609C26.7529 26.0372 26.4428 26.0632 26.1134 26.0171ZM14.9165 23.0629C14.116 22.8226 13.4432 22.3179 13.0018 21.639C12.5604 20.9601 12.3804 20.1494 12.4954 19.3538C12.6104 18.5582 13.0123 17.8356 13.6255 17.3135C14.2387 16.7914 15.0209 16.505 15.8229 16.5098C16.1404 16.5046 16.4565 16.5484 16.7618 16.6394C16.6002 16.9124 16.4479 17.1831 16.3062 17.4538C16.0354 17.9653 15.7792 18.4826 15.5376 18.9936L15.4056 19.2649C14.6528 20.8376 14.0044 22.0906 13.8061 22.5038C14.1586 22.6687 14.5319 22.7859 14.9165 22.8527C14.7058 22.937 14.5094 23.0213 14.9165 23.0629ZM11.4926 31.034C10.5682 31.0311 9.66255 30.7727 8.87793 30.2932C8.12603 29.8393 7.49802 29.2102 7.05022 28.4647C6.60242 27.7191 6.34775 26.88 6.31227 26.0171C6.29091 25.6836 6.30109 25.3485 6.34255 25.0171C6.52686 25.0576 6.7143 25.0852 6.90301 25.0995C7.33198 25.1321 7.76389 25.1078 8.18659 25.0273C8.60929 24.9469 9.01824 24.8112 9.40164 24.6246C9.78505 24.438 10.1384 24.2025 10.4509 23.9261C10.7633 23.6498 11.0311 23.3358 11.2446 22.9941C11.9098 22.0251 12.7942 21.2025 13.8327 20.5925C13.9647 20.7693 14.1072 20.9368 14.2591 21.0944C14.7116 21.5695 15.2693 21.925 15.8875 22.129C15.9052 22.1724 15.6303 22.9009 14.9165 23.0629C14.5275 23.1402 14.1463 23.2508 13.7765 23.3936C13.1493 23.6427 12.5758 24.0211 12.0938 24.502C11.5519 25.0531 11.157 25.7322 10.9478 26.4774C10.7386 27.2227 10.7221 28.009 10.8999 28.7634C11.0776 29.5178 11.4431 30.2111 11.962 30.7898C12.481 31.3685 13.1347 31.8119 13.8613 32.0769C13.2068 31.7088 12.5916 31.2887 12.0227 30.821C11.8573 30.687 11.6985 30.5442 11.5471 30.3933C11.5291 30.273 11.5067 30.1538 11.4926 30.0361V31.034ZM25.621 17.731C25.0592 17.1791 24.3829 16.7711 23.6425 16.5379C22.9021 16.3047 22.1192 16.2528 21.3553 16.3867C20.5914 16.5207 19.8711 16.837 19.2505 17.3087C18.6299 17.7805 18.1272 18.3937 17.7876 19.0961C17.4793 19.7253 17.2862 20.41 17.2196 21.1131C17.2118 21.1927 17.2079 21.2726 17.2079 21.3527C17.073 20.8391 16.8609 20.3434 16.5777 19.8825C16.2392 19.3172 15.779 18.8343 15.231 18.4712C14.683 18.1082 14.0612 17.8742 13.4133 17.7863C12.7653 17.6984 12.1072 17.7588 11.4868 17.9628C10.8664 18.1668 10.3 18.5096 9.82708 18.9686C9.35417 19.4276 8.98705 19.9908 8.75185 20.6159C8.51665 21.2411 8.41924 21.9125 8.46767 22.5814C8.51611 23.2503 8.70903 23.9006 9.03261 24.4868C8.69508 24.5751 8.34866 24.632 8 24.6567C7.65133 24.68 7.30104 24.6677 6.95476 24.6201C6.52636 24.5593 6.11088 24.4256 5.72768 24.2248C5.3394 24.0152 4.9877 23.7369 4.6884 23.4029C4.09538 22.7558 3.7165 21.9405 3.60223 21.0693C3.48797 20.1981 3.64428 19.3127 4.05054 18.5349C4.23779 18.174 4.46216 17.832 4.72 17.515C4.92 17.2479 5.14333 16.9557 5.39 16.6361L5.52666 16.4631C7.93604 13.1214 10.4918 9.35436 12.8759 5.70173L12.982 5.51079C13.2239 5.0761 13.4913 4.64142 13.758 4.21868C13.9494 3.90316 14.1667 3.60243 14.4073 3.32033C14.5984 3.10104 14.8228 2.91066 15.073 2.75671C15.3233 2.60276 15.5965 2.48741 15.8827 2.41522C16.1689 2.34303 16.4641 2.31494 16.759 2.33218C17.054 2.34942 17.3436 2.41174 17.6179 2.51637C18.1779 2.73691 18.6637 3.09895 19.026 3.56556C19.2576 3.84788 19.4687 4.14866 19.6575 4.46424C19.9359 4.8859 20.205 5.32167 20.4654 5.77831L20.5654 5.96034C22.9524 9.61296 25.5101 13.3721 27.8975 16.7238L28.0122 16.8978C28.2608 17.241 28.5183 17.5743 28.7671 17.9265C29.0139 18.2776 29.2268 18.6495 29.4034 19.0377C29.7294 19.7274 29.8994 20.4835 29.8992 21.2509C29.8991 22.0183 29.7287 22.7743 29.4024 23.4638C28.9524 24.4911 28.1604 25.3299 27.1643 25.8344C26.6628 26.0872 26.1174 26.2563 25.556 26.3347C25.5847 25.7641 25.5234 25.1929 25.3745 24.6411C25.2255 24.0892 24.9912 23.5653 24.6809 23.0897C25.1142 22.7286 25.4632 22.2799 25.7076 21.774C25.952 21.2681 26.0863 20.7173 26.1017 20.1571C26.1171 19.5968 26.0132 19.0397 25.7968 18.5225C25.5804 18.0053 25.2566 17.5404 24.8437 17.1586L25.621 17.731ZM14.9165 3.71079C15.6417 3.71079 16.2332 4.30235 16.2332 5.02748C16.2332 5.7526 15.6417 6.34416 14.9165 6.34416C14.1914 6.34416 13.5999 5.7526 13.5999 5.02748C13.5999 4.30235 14.1914 3.71079 14.9165 3.71079Z" />
          </svg>
          <span className="ml-2 text-airbnb-pink font-bold text-xl">airbnb</span>
        </Link>

        {/* Search bar */}
        <div 
          className={`hidden md:flex items-center border rounded-full px-4 py-2 shadow-sm transition-all duration-300 ${showSearch ? 'ring-2 ring-gray-200' : ''}`}
          onClick={() => setShowSearch(true)}
        >
          <Button variant="ghost" className="font-medium text-sm px-3">
            Anywhere
          </Button>
          <div className="h-5 border-r border-gray-300"></div>
          <Button variant="ghost" className="font-medium text-sm px-3">
            Any week
          </Button>
          <div className="h-5 border-r border-gray-300"></div>
          <Button variant="ghost" className="font-medium text-sm px-3">
            Add guests
          </Button>
          <Button size="icon" className="rounded-full bg-airbnb-red text-white ml-2">
            <Search className="h-4 w-4" />
          </Button>
        </div>

        {/* Mobile search */}
        <div className="md:hidden">
          <Button variant="outline" className="rounded-full" onClick={() => setShowSearch(true)}>
            <Search className="h-4 w-4 mr-2" />
            <span>Search</span>
          </Button>
        </div>

        {/* User menu */}
        <div className="flex items-center">
          <Button variant="ghost" className="rounded-full text-sm font-medium hidden md:flex">
            Airbnb your home
          </Button>
          <Button variant="ghost" size="icon" className="rounded-full hidden md:flex">
            <Globe className="h-5 w-5" />
          </Button>
          <DropdownMenu>
            <DropdownMenuTrigger asChild>
              <Button variant="outline" className="rounded-full flex items-center gap-2 pl-3 ml-2 border-gray-300">
                <Menu className="h-4 w-4" />
                <div className="h-8 w-8 rounded-full bg-gray-500 flex items-center justify-center text-white">
                  <User className="h-4 w-4" />
                </div>
              </Button>
            </DropdownMenuTrigger>
            <DropdownMenuContent align="end" className="w-56 mt-2">
              <DropdownMenuItem className="font-semibold">Sign up</DropdownMenuItem>
              <DropdownMenuItem>Log in</DropdownMenuItem>
              <DropdownMenuItem>Airbnb your home</DropdownMenuItem>
              <DropdownMenuItem>Help Center</DropdownMenuItem>
            </DropdownMenuContent>
          </DropdownMenu>
        </div>
      </div>

      {/* Search panel (expandable) */}
      {showSearch && (
        <div className="absolute top-full left-0 w-full bg-white p-4 shadow-md border-t border-gray-200 animate-fade-in">
          <div className="container mx-auto">
            <div className="flex flex-col md:flex-row gap-4">
              <div className="flex-1">
                <label className="block text-sm font-medium mb-1">Where</label>
                <Input 
                  placeholder="Search destinations" 
                  className="rounded-lg" 
                />
              </div>
              <div className="grid grid-cols-2 gap-4 flex-1">
                <div>
                  <label className="block text-sm font-medium mb-1">Check in</label>
                  <Input 
                    type="date" 
                    className="rounded-lg" 
                  />
                </div>
                <div>
                  <label className="block text-sm font-medium mb-1">Check out</label>
                  <Input 
                    type="date" 
                    className="rounded-lg" 
                  />
                </div>
              </div>
              <div className="flex-1">
                <label className="block text-sm font-medium mb-1">Who</label>
                <div className="flex justify-between">
                  <Input 
                    placeholder="Add guests" 
                    className="rounded-lg flex-1" 
                  />
                  <Button className="ml-3 bg-airbnb-red text-white rounded-lg">
                    <Search className="h-4 w-4 mr-2" />
                    Search
                  </Button>
                </div>
              </div>
            </div>
          </div>
        </div>
      )}
    </header>
  );
};

export default Header;
